# Initialization of an n-alkane fluid confined between solid walls

## For gold:

* The _PDB_ file is the output of [atomsk](https://atomsk.univ-lille.fr/) by running the command:\
`atomsk --create fcc 4.08 Au orient [-12-1] [-101] [111] gold.pdb`

* The coordinates from _gold.pdb_ are then copied into _gold.lt_

## For pentane:

* The _\<alkane>.lt_ file topology data comes from _\<alkane>.mol_ file

## For the whole system:

* Both lt files are imported in _geometry.lt_. The _system.lt_ then imports the geometry and adds the settings needed for the LAMMPS MD simualtion.

### Workflow:

1. **Initialize**: Run the python module _init\_Moltemp\_walls_ (located in `home/tools`) in `equilib/data/moltemp` with the positional arguments. Usage:\
`initalize_walls.py nUnitsX nUnitsY nUnitsZ h mFluid density <alkane> lammps` \
The main variables here are `nUnitsX` and `density`\
To chgange the geometry of the walls, the parameters `amplitude`, `width` and `xshift`. \
This will create _data.init_ file, LAMMPS data file with only the walls.

2. Go to the moltemp directory and type \
`ltemplify.py -name au data.init > gold\_all.lt` \
This will convert the LAMMPS data file into a lt file which can be read by moltemp, i.e. the walls 

3. While in the moltemp directory, use the same command used in step 1. When prompted with `solid\_initialized`, type `yes` or `y`. The initial atomic configuration is now created with the fluid molecules. \

4. If there is any fluid/solid overlap, you need to edit the script `geometry.lt` and run the _setup_ bash script manually. \
Inside the `geometry.lt` file, to delete some fluid rows/columns, use:
`delete mol[2-17][0-7][0-2]` \

### More info:

Inside the _setup_ bash script (which is run automatically when prompted with `run\_moltemp`), the command used is \
`moltemplate.sh -atomstyle full -overlay-bonds -overlay-angles -overlay-dihedrals -overlay-impropers system.lt` \
The `-overlay-*` flags are required for cases where multiple bonded interactions involve the same atoms.
This will create:
    * _system.in.init_ &rarr; Generated either by the force field file or the molecule geometry file and it comprises the initialization setup  
    * _system.in.settings_ &rarr; Generated either by the force field file or the molecule geometry file and it comprises the force field parameters  
    * _system.in.run_ &rarr; Generated by _system.lt_ from what was specified in the python file and it contains the simulation conditions (NVT,NVE,etc)  
    * _system.in.output_ &rarr; Generated by _system.lt_ from what was specified in the python file and it contains info on the thermodynamic output and its frequency.
    * _system.data_; LAMMPS data file.

    The _setup_ script will also modify the simulation header file and will copy all the simulation files (including LAMMPS data file _system.data_) into `equilib\data\blocks`. The input files for equilibration are now ready and the `equilib` directory is to be rsynced to the cluster **NEMO**.
